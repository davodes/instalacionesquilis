---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const blogPosts = [
  {
    title: "Guía completa para elegir el aire acondicionado perfecto",
    excerpt: "Todo lo que necesitas saber antes de instalar un sistema de climatización en tu hogar o empresa.",
    date: "2024-01-15",
    category: "Climatización",
    slug: "guia-aire-acondicionado",
    image: "https://images.pexels.com/photos/6758773/pexels-photo-6758773.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "5 min"
  },
  {
    title: "Eficiencia energética: Cómo reducir el consumo eléctrico",
    excerpt: "Consejos prácticos para optimizar las instalaciones eléctricas y ahorrar en la factura de la luz.",
    date: "2024-01-10",
    category: "Electricidad",
    slug: "eficiencia-energetica",
    image: "https://images.pexels.com/photos/442150/pexels-photo-442150.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "7 min"
  },
  {
    title: "Iluminación LED: La revolución lumínica",
    excerpt: "Descubre por qué cambiar a LED es la mejor inversión para tu hogar o negocio.",
    date: "2024-01-05",
    category: "Iluminación",
    slug: "iluminacion-led-revolucion",
    image: "https://images.pexels.com/photos/1103970/pexels-photo-1103970.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "4 min"
  },
  {
    title: "Horticultura 4.0: El futuro de la agricultura urbana",
    excerpt: "Tecnologías emergentes que están transformando el cultivo en entornos controlados.",
    date: "2023-12-28",
    category: "Horticultura",
    slug: "horticultura-4-0",
    image: "https://images.pexels.com/photos/1482101/pexels-photo-1482101.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "6 min"
  },
  {
    title: "Mantenimiento preventivo: Evita averías costosas",
    excerpt: "La importancia del mantenimiento regular en sistemas de climatización e instalaciones.",
    date: "2023-12-20",
    category: "Mantenimiento",
    slug: "mantenimiento-preventivo",
    image: "https://images.pexels.com/photos/8293778/pexels-photo-8293778.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "5 min"
  },
  {
    title: "Automatización del hogar: Domótica inteligente",
    excerpt: "Cómo la domótica puede mejorar tu calidad de vida y reducir el consumo energético.",
    date: "2023-12-15",
    category: "Domótica",
    slug: "automatizacion-hogar",
    image: "https://images.pexels.com/photos/6758773/pexels-photo-6758773.jpeg?auto=compress&cs=tinysrgb&w=800",
    readTime: "8 min"
  }
];

const categories = ["Todos", "Climatización", "Electricidad", "Iluminación", "Horticultura", "Mantenimiento", "Domótica"];
---

<Layout 
  title="Blog - Instalaciones Quilis | Consejos y Noticias del Sector"
  description="Blog de Instalaciones Quilis con consejos, guías y las últimas novedades en climatización, electricidad, iluminación y horticultura técnica."
>
  <Header />
  
  <main class="pt-20">
    <!-- Hero Section -->
    <section class="py-16 lg:py-24 bg-gradient-to-r from-primary-900 via-primary-800 to-primary-700">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl lg:text-6xl font-bold text-white mb-6">
          Blog Técnico
        </h1>
        <p class="text-xl text-primary-100 max-w-3xl mx-auto">
          Consejos expertos, guías técnicas y las últimas novedades en instalaciones profesionales
        </p>
      </div>
    </section>
    
    <!-- Filter Categories -->
    <section class="py-8 bg-white border-b border-secondary-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-wrap justify-center gap-4">
          {categories.map((category) => (
            <button 
              class="px-6 py-2 rounded-full border border-secondary-300 text-secondary-600 hover:bg-primary-600 hover:text-white hover:border-primary-600 transition-colors duration-200"
              data-category={category}
            >
              {category}
            </button>
          ))}
        </div>
      </div>
    </section>
    
    <!-- Blog Posts Grid -->
    <section class="py-16 lg:py-24 bg-secondary-50">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="blog-grid">
          {blogPosts.map((post) => (
            <article 
              class="bg-white rounded-2xl shadow-lg overflow-hidden hover:shadow-2xl transition-shadow duration-300 blog-post"
              data-category={post.category}
            >
              <div class="aspect-w-16 aspect-h-9 overflow-hidden">
                <img
                  src={post.image}
                  alt={post.title}
                  class="w-full h-48 object-cover hover:scale-105 transition-transform duration-300"
                  loading="lazy"
                />
              </div>
              
              <div class="p-6">
                <div class="flex items-center gap-4 mb-4">
                  <span class="bg-primary-100 text-primary-800 px-3 py-1 rounded-full text-xs font-semibold">
                    {post.category}
                  </span>
                  <span class="text-secondary-500 text-sm">
                    {post.readTime}
                  </span>
                </div>
                
                <h2 class="text-xl font-bold text-secondary-900 mb-3 line-clamp-2">
                  {post.title}
                </h2>
                
                <p class="text-secondary-600 mb-4 line-clamp-3">
                  {post.excerpt}
                </p>
                
                <div class="flex items-center justify-between">
                  <time class="text-secondary-500 text-sm">
                    {new Date(post.date).toLocaleDateString('es-ES', { 
                      year: 'numeric', 
                      month: 'long', 
                      day: 'numeric' 
                    })}
                  </time>
                  
                  <a
                    href={`/blog/${post.slug}`}
                    class="text-primary-600 hover:text-primary-700 font-medium text-sm flex items-center gap-1 group"
                  >
                    Leer más
                    <svg class="w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>
    
    <!-- Newsletter -->
    <section class="py-16 bg-primary-900">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-3xl font-bold text-white mb-4">
          Suscríbete a nuestro newsletter
        </h2>
        <p class="text-primary-100 mb-8">
          Recibe consejos técnicos, novedades del sector y ofertas especiales directamente en tu email
        </p>
        
        <form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
          <input
            type="email"
            placeholder="tu@email.com"
            required
            class="flex-1 px-4 py-3 rounded-lg border border-primary-700 bg-white/10 text-white placeholder-primary-300 focus:outline-none focus:ring-2 focus:ring-accent-500"
          />
          <button
            type="submit"
            class="bg-accent-500 hover:bg-accent-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors"
          >
            Suscribirse
          </button>
        </form>
      </div>
    </section>
  </main>
  
  <Footer />
</Layout>

<script>
  // Blog filter functionality
  const filterButtons = document.querySelectorAll('[data-category]');
  const blogPosts = document.querySelectorAll('.blog-post');
  
  filterButtons.forEach(button => {
    button.addEventListener('click', () => {
      const category = button.getAttribute('data-category');
      
      // Update active button
      filterButtons.forEach(btn => btn.classList.remove('bg-primary-600', 'text-white', 'border-primary-600'));
      button.classList.add('bg-primary-600', 'text-white', 'border-primary-600');
      
      // Filter posts
      blogPosts.forEach(post => {
        const postCategory = post.getAttribute('data-category');
        
        if (category === 'Todos' || postCategory === category) {
          post.style.display = 'block';
        } else {
          post.style.display = 'none';
        }
      });
    });
  });
  
  // Set "Todos" as active by default
  filterButtons[0].classList.add('bg-primary-600', 'text-white', 'border-primary-600');
</script>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>